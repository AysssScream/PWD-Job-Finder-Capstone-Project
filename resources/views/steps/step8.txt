<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/steps.css">

</head>
<div class="py-12">
    <div class="container mx-auto">
        <div class="flex justify-center">
            <div class="w-5/6">
                <form action="{{ route('otherskills') }}" method="POST" enctype="multipart/form-data">
                    @csrf
                    @if ($errors->any())
                        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"
                            role="alert">
                            <strong class="font-bold">Oops!</strong>
                            <span class="block sm:inline">There were some errors with your submission:</span>
                            <ul class="mt-3 list-disc list-inside text-sm">
                                @foreach ($errors->all() as $error)
                                    <li>{{ $error }}</li>
                                @endforeach
                            </ul>
                        </div>
                        <br>
                    @endif
                    <div class="bg-white shadow-md rounded-lg">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2">Other Skills</h3>
                            <!-- Adjusted text size to text-2xl -->
                            <span class="text-xl font-semibold">Step 7:</span>
                            <!-- Added Step 1 on the hard right -->
                            {{ __("You're logged in!") }}
                            <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    @include('layouts.dropdown')
                                </div>
                                <div>
                                    <div class="mt-6">
                                        <label for="autoMechanic" class="flex items-center">
                                            <input type="checkbox" id="autoMechanic" name="skills[]"
                                                value="AUTO MECHANIC" class="mr-2"
                                                {{ in_array('AUTO MECHANIC', old('skills', $formData8['skills'] ?? [])) ? 'checked' : '' }}>
                                            Auto Mechanic
                                        </label>
                                    </div>
                                    <div class="mt-6">
                                        <label for="gardening" class="flex items-center">
                                            <input type="checkbox" id="gardening" name="skills[]" value="GARDENING"
                                                class="mr-2"
                                                {{ in_array('GARDENING', old('skills', $formData8['skills'] ?? [])) ? 'checked' : '' }}>
                                            Gardening
                                        </label>
                                    </div>
                                    <div class="mt-6">
                                        <label for="beautician" class="flex items-center">
                                            <input type="checkbox" id="beautician" name="skills[]" value="BEAUTICIAN"
                                                class="mr-2"
                                                {{ in_array('BEAUTICIAN', old('skills', $formData8['skills'] ?? [])) ? 'checked' : '' }}>
                                            Beautician
                                        </label>
                                    </div>

                                    <div class="mt-6">
                                        <label for="carpentry" class="flex items-center">
                                            <input type="checkbox" id="carpentry" name="skills[]" value="CARPENTRY WORK"
                                                class="mr-2"
                                                {{ in_array('CARPENTRY WORK', old('skills', $formData8['skills'] ?? [])) ? 'checked' : '' }}>
                                            Carpentry Work
                                        </label>
                                    </div>

                                    <div class="mt-6">
                                        <label for="painter" class="flex items-center">
                                            <input type="checkbox" id="painter" name="skills[]" value="PAINTER/ARTIST"
                                                class="mr-2"
                                                {{ in_array('PAINTER/ARTIST', old('skills', $formData8['skills'] ?? [])) ? 'checked' : '' }}>
                                            Painter/Artist
                                        </label>
                                    </div>

                                    <div class="mt-6">
                                        <label for="computerLiteracy" class="flex items-center">
                                            <input type="checkbox" id="computerLiteracy" name="skills[]"
                                                value="COMPUTER LITERATE" class="mr-2"
                                                {{ in_array('COMPUTER LITERATE', old('skills', $formData8['skills'] ?? [])) ? 'checked' : '' }}>
                                            Computer Literate
                                        </label>
                                    </div>

                                    <div class="mt-6">
                                        <label for="paintingJobs" class="flex items-center">
                                            <input type="checkbox" id="paintingJobs" name="skills[]"
                                                value="PAINTING JOBS" class="mr-2"
                                                {{ in_array('PAINTING JOBS', old('skills', $formData8['skills'] ?? [])) ? 'checked' : '' }}>
                                            Painting Jobs
                                        </label>
                                    </div>

                                    <div class="mt-6">
                                        <label for="domesticChores" class="flex items-center">
                                            <input type="checkbox" id="domesticChores" name="skills[]"
                                                value="DOMESTIC CHORES" class="mr-2"
                                                {{ in_array('DOMESTIC CHORES', old('skills', $formData8['skills'] ?? [])) ? 'checked' : '' }}>
                                            Domestic Chores
                                        </label>
                                    </div>

                                </div>
                                <div>
                                    <div class="mt-6">
                                        <label for="photography" class="flex items-center">
                                            <input type="checkbox" id="photography" name="skills[]" value="PHOTOGRAPHY"
                                                class="mr-2"
                                                {{ in_array('PHOTOGRAPHY', old('skills', $formData8['skills'] ?? [])) ? 'checked' : '' }}>
                                            Photography
                                        </label>
                                    </div>

                                    <div class="mt-6">
                                        <label for="driving" class="flex items-center">
                                            <input type="checkbox" id="driving" name="skills[]" value="DRIVING"
                                                class="mr-2"
                                                {{ in_array('DRIVING', old('skills', $formData8['skills'] ?? [])) ? 'checked' : '' }}>
                                            Driving
                                        </label>
                                    </div>
                                    <div class="mt-6">
                                        <label for="sewingDresses" class="flex items-center">
                                            <input type="checkbox" id="sewingDresses" name="skills[]"
                                                value="SEWING DRESSES" class="mr-2"
                                                {{ in_array('SEWING DRESSES', old('skills', $formData8['skills'] ?? [])) ? 'checked' : '' }}>
                                            Sewing Dresses
                                        </label>
                                    </div>

                                    <div class="mt-6">
                                        <label for="electrician" class="flex items-center">
                                            <input type="checkbox" id="electrician" name="skills[]"
                                                value="ELECTRICIAN" class="mr-2"
                                                {{ in_array('ELECTRICIAN', old('skills', $formData8['skills'] ?? [])) ? 'checked' : '' }}>
                                            Electrician
                                        </label>
                                    </div>

                                    <div class="mt-6">
                                        <label for="stenography" class="flex items-center">
                                            <input type="checkbox" id="stenography" name="skills[]"
                                                value="STENOGRAPHY" class="mr-2"
                                                {{ in_array('STENOGRAPHY', old('skills', $formData8['skills'] ?? [])) ? 'checked' : '' }}>
                                            Stenography
                                        </label>
                                    </div>

                                    <div class="mt-6">
                                        <label for="embroidery" class="flex items-center">
                                            <input type="checkbox" id="embroidery" name="skills[]"
                                                value="EMBROIDERY" class="mr-2"
                                                {{ in_array('EMBROIDERY', old('skills', $formData8['skills'] ?? [])) ? 'checked' : '' }}>
                                            Embroidery
                                        </label>
                                    </div>
                                    <div class="mt-6">
                                        <label for="tailoring" class="flex items-center">
                                            <input type="checkbox" id="tailoring" name="skills[]" value="TAILORING"
                                                class="mr-2"
                                                {{ in_array('TAILORING', old('skills', $formData8['skills'] ?? [])) ? 'checked' : '' }}>
                                            Tailoring
                                        </label>
                                    </div>

                                    <div class="mt-6">
                                        <label for="masonry" class="flex items-center">
                                            <input type="checkbox" id="masonry" name="skills[]" value="MASONRY"
                                                class="mr-2"
                                                {{ in_array('MASONRY', old('skills', $formData8['skills'] ?? [])) ? 'checked' : '' }}>
                                            Masonry
                                        </label>
                                    </div>
                                    <div class="mt-6">
                                        <label for="otherSkills" class="flex items-center">
                                            <input type="checkbox" id="otherSkillsCheckbox" name="skills[]"
                                                value="OTHER_SKILLS" class="mr-2"
                                                {{ in_array('OTHER_SKILLS', old('skills', $formData8['skills'] ?? [])) ? 'checked' : '' }}
                                                onchange="toggleTextBox()">
                                            Other:
                                        </label>
                                        <br>
                                    </div>
                                    @error('skills')
                                        <div class="text-red-600 mt-1">{{ $message }}</div>
                                    @enderror

                                    <textarea type="text" id="otherSkills" name="otherSkills" class="w-full p-2 border rounded "
                                        {{ in_array('OTHER_SKILLS', old('skills', $formData8['skills'] ?? [])) ? '' : 'disabled' }}>{{ old('otherSkills', $formData8['otherSkills'] ?? '') }}</textarea>
                                    <br>
                                    <input type="hidden" id="selectedSkills" name="selectedSkills" value="">
                                    <input type="hidden" id="otherSkillsInput" name="otherSkillsInput"
                                        value="">
                                </div>


                            </div>

                            <div class="mt-4 text-right">
                                <a href="{{ route('workexp') }}"
                                    class="inline-block py-2 px-4 bg-black text-white rounded-md shadow-md hover:bg-red-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 mr-2">Previous</a>

                                <button type="submit"
                                    class="inline-block py-2 px-4 bg-green-600 text-white rounded-md shadow-md hover:bg-red-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">Save</button>
                            </div>
                        </div>
                    </div>

                    <script>
                        function toggleTextBox() {
                            var checkbox = document.getElementById("otherSkillsCheckbox");
                            var textBox = document.getElementById("otherSkills");

                            if (checkbox.checked) {
                                // Enable the text box
                                textBox.disabled = false;
                            } else {
                                // Clear and disable the text box
                                textBox.value = "";
                                textBox.disabled = true;
                            }
                        }

                        document.addEventListener("DOMContentLoaded", function() {
                            const currentYear = new Date().getFullYear();
                            document.getElementById("yearGraduated").placeholder = currentYear;
                        });

                        function updateHiddenInputs() {
                            // Get all checked checkboxes
                            let selectedSkills = [];
                            let otherSkills = "";
                            document.querySelectorAll('input[name="skills[]"]:checked').forEach(function(checkbox) {
                                if (checkbox.value !== "OTHER_SKILLS") {
                                    selectedSkills.push(checkbox.value);
                                }
                            });

                            // Check if "Other Skills" checkbox is checked
                            if (document.getElementById('otherSkillsCheckbox').checked) {
                                otherSkills = document.getElementById('otherSkills').value;
                            }

                            // Update hidden inputs with selected skills and other skills
                            document.getElementById('selectedSkills').value = JSON.stringify(selectedSkills);
                            document.getElementById('otherSkillsInput').value = otherSkills;
                        }

                        // Call updateHiddenInputs when checkboxes are changed
                        document.querySelectorAll('input[name="skills[]"]').forEach(function(checkbox) {
                            checkbox.addEventListener('change', updateHiddenInputs);
                        });

                        // Call updateHiddenInputs when "Other Skills" textarea changes
                        document.getElementById('otherSkills').addEventListener('input', updateHiddenInputs);

                        // Call updateHiddenInputs on page load to initialize hidden inputs
                        window.addEventListener('load', updateHiddenInputs);
                    </script>
